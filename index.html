<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AQUARIUS AI - Sustainable Water Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@300;500;700&display=swap');
        
        :root {
            --neon-cyan: #00f2ff;
            --neon-purple: #bc00ff;
            --neon-green: #39ff14;
            --dark-bg: #000b1a;
        }

        body {
            background-color: var(--dark-bg);
            color: #e0f2fe;
            font-family: 'Rajdhani', sans-serif;
            min-height: 100vh;
        }

        .neon-border-cyan { border: 1px solid rgba(0, 242, 255, 0.3); box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        .neon-border-purple { border: 1px solid rgba(188, 0, 255, 0.3); box-shadow: 0 0 15px rgba(188, 0, 255, 0.1); }
        .neon-border-green { border: 1px solid rgba(57, 255, 20, 0.3); box-shadow: 0 0 15px rgba(57, 255, 20, 0.1); }

        .card-bg {
            background: rgba(0, 20, 40, 0.6);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .card-bg:hover {
            background: rgba(0, 30, 60, 0.8);
            transform: translateY(-3px);
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
        }

        .neon-text { 
            font-family: 'Orbitron', sans-serif; 
            text-shadow: 0 0 8px var(--neon-cyan);
            color: var(--neon-cyan);
        }

        #details-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .btn-dss {
            background: rgba(0, 242, 255, 0.1);
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            transition: all 0.3s;
        }

        .btn-dss:hover {
            background: var(--neon-cyan);
            color: black;
            box-shadow: 0 0 20px var(--neon-cyan);
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Header Sesuai Gambar -->
    <header class="flex flex-col md:flex-row justify-between items-center mb-10">
        <div>
            <h1 class="text-4xl font-bold neon-text tracking-tighter">AQUARIUS AI</h1>
            <p class="text-[10px] uppercase tracking-[0.4em] text-cyan-500/80">Sustainable Water Management Intelligent Agent</p>
        </div>
        <div class="mt-4 md:mt-0 flex gap-4">
            <div class="card-bg border border-cyan-500/30 px-6 py-2 flex items-center gap-3">
                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_10px_#39ff14]"></span>
                <span class="text-[10px] font-bold tracking-widest">SYSTEM ONLINE: SURAKARTA HUB</span>
            </div>
        </div>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <!-- Kolom Kiri: AI Visualization & Monitoring -->
        <div class="lg:col-span-4 space-y-6">
            <div class="card-bg p-8 flex flex-col items-center justify-center border border-white/5 h-[400px] relative overflow-hidden">
                <div class="w-48 h-48 rounded-full border-2 border-cyan-500/30 flex items-center justify-center relative">
                    <div class="absolute inset-0 rounded-full border-t-2 border-cyan-400 animate-spin"></div>
                    <i class="fas fa-microchip text-6xl text-cyan-400"></i>
                </div>
                <div class="mt-10 text-center">
                    <p class="text-xl font-bold italic tracking-wider">"Ready to bridge the GAP."</p>
                    <p id="last-update" class="text-[10px] text-gray-500 mt-2 font-mono">Analytic Engine: Active | LOADING DATA...</p>
                </div>
            </div>

            <div class="card-bg p-6 border border-white/5">
                <h3 class="text-xs font-bold uppercase tracking-widest text-cyan-400 mb-4 flex items-center gap-2">
                    <i class="fas fa-chart-line"></i> Real-time Monitoring
                </h3>
                <div id="monitoring-data">
                    <div class="flex justify-between text-[11px] mb-1">
                        <span>Water Level (Gandekan Gate)</span>
                        <span id="gate-status" class="text-yellow-400">Loading...</span>
                    </div>
                    <div class="w-full bg-white/5 h-1.5 rounded-full overflow-hidden">
                        <div id="gate-progress" class="bg-yellow-400 h-full transition-all duration-1000" style="width: 0%"></div>
                    </div>
                    <div class="mt-4 h-32">
                        <canvas id="liveChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Kolom Kanan: Modul Utama -->
        <div class="lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4 h-fit">
            
            <button onclick="showDetail('spatial')" class="card-bg p-6 text-left neon-border-cyan group relative overflow-hidden">
                <div class="flex justify-between items-start mb-4">
                    <i class="fas fa-layer-group text-2xl text-cyan-400"></i>
                    <i class="fas fa-check text-green-500 opacity-50"></i>
                </div>
                <h4 class="font-bold text-lg mb-1 uppercase tracking-tight">Spatial Information System</h4>
                <p class="text-[11px] text-gray-400 leading-relaxed">Integrasi data SDA berbasis geospasial untuk akurasi presisi tinggi.</p>
            </button>

            <button onclick="showDetail('sensors')" class="card-bg p-6 text-left neon-border-cyan group">
                <div class="flex justify-between items-start mb-4">
                    <i class="fas fa-satellite-dish text-2xl text-cyan-400"></i>
                    <i class="fas fa-check text-green-500 opacity-50"></i>
                </div>
                <h4 class="font-bold text-lg mb-1 uppercase tracking-tight">Real-time Sensors</h4>
                <p class="text-[11px] text-gray-400 leading-relaxed">Akuisisi data instan dari sensor IoT di sepanjang aliran sungai.</p>
            </button>

            <button onclick="showDetail('twin')" class="card-bg p-6 text-left neon-border-purple group">
                <div class="flex justify-between items-start mb-4">
                    <i class="fas fa-clone text-2xl text-purple-400"></i>
                    <i class="fas fa-check text-green-500 opacity-50"></i>
                </div>
                <h4 class="font-bold text-lg mb-1 uppercase tracking-tight">Digital Twin Analysis</h4>
                <p class="text-[11px] text-gray-400 leading-relaxed">Pemodelan simulasi untuk perencanaan operasional & mitigasi banjir.</p>
            </button>

            <button onclick="showDetail('sharing')" class="card-bg p-6 text-left neon-border-green group">
                <div class="flex justify-between items-start mb-4">
                    <i class="fas fa-users-cog text-2xl text-green-400"></i>
                    <i class="fas fa-check text-green-500 opacity-50"></i>
                </div>
                <h4 class="font-bold text-lg mb-1 uppercase tracking-tight">Collaborative Data Sharing</h4>
                <p class="text-[11px] text-gray-400 leading-relaxed">Platform lintas sektor untuk efisiensi pengelolaan data SDA.</p>
            </button>

            <!-- Decision Support System Area -->
            <div class="md:col-span-2 card-bg p-8 mt-4 border border-cyan-500/20 shadow-[inset_0_0_20px_rgba(0,242,255,0.05)]">
                <h3 class="neon-text text-xl mb-6 tracking-widest uppercase">Decision Support System</h3>
                <div class="flex flex-wrap gap-4">
                    <button class="btn-dss px-8 py-2 font-bold uppercase text-xs tracking-widest">Run Flood Simulation</button>
                    <button class="btn-dss px-8 py-2 font-bold uppercase text-xs tracking-widest">View Spatial Map</button>
                    <button onclick="showDetail('sop')" class="px-8 py-2 font-bold uppercase text-xs tracking-widest border border-red-500/50 text-red-500 hover:bg-red-500 hover:text-black transition-all">Gate Control (SOP)</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Overlay Detail -->
    <div id="details-overlay" onclick="closeDetail()">
        <div class="card-bg max-w-2xl w-full p-10 border border-cyan-500/50 relative" onclick="event.stopPropagation()">
            <button onclick="closeDetail()" class="absolute top-6 right-6 text-gray-500 hover:text-white text-xl">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-content"></div>
        </div>
    </div>

    <script>
        const contentData = {
            spatial: {
                title: "Spatial Information System",
                subtitle: "Integrated Geospatial Data for Watershed Analysis",
                desc: "Modul ini mengintegrasikan berbagai lapisan data spasial seperti tata guna lahan, jenis tanah, dan kelerengan (DEM) untuk wilayah Indonesia. Data ini sangat krusial untuk menentukan parameter hidrologi secara presisi, sehingga analisis limpasan menjadi lebih akurat dibandingkan metode konvensional."
            },
            sensors: {
                title: "Real-time Sensors",
                subtitle: "IoT-Based Hydrometeorological Monitoring",
                desc: "Fitur ini menampilkan data langsung (real-time) dari sensor tinggi muka air (TMA) dan alat penakar hujan otomatis (ARR). Informasi ini bertujuan untuk menghilangkan hambatan akuisisi data yang selama ini terfragmentasi di Indonesia."
            },
            twin: {
                title: "Digital Twin Analysis",
                subtitle: "Dynamic Hydrological Simulation & Predictive Modeling",
                desc: "Menggunakan replika digital DAS untuk mensimulasikan skenario curah hujan. Digital twin memungkinkan prediksi luas genangan banjir sebelum kejadian nyata terjadi, mendukung perencanaan strategis nasional yang cerdas dan efisien."
            },
            sharing: {
                title: "Collaborative Data Sharing",
                subtitle: "Cross-Sectoral Integrated Data Repository",
                desc: "Platform dirancang untuk memfasilitasi pertukaran data antar instansi terkait (BMKG, BBWS, DPU) guna mengatasi silo data. Kolaborasi ini memastikan akses data yang konsisten untuk pengelolaan SDA Indonesia yang adil dan transparan."
            },
            sop: {
                title: "Gate Control SOP",
                subtitle: "Evidence-Based Operational Standard Procedure",
                desc: "Panduan teknis pengoperasian pintu air (seperti Pintu Gandekan) berbasis data real-time dan simulasi HEC-HMS. Memastikan mitigasi dilakukan secara tepat waktu dan efisien sesuai standar operasional."
            }
        };

        function showDetail(key) {
            const data = contentData[key];
            const modal = document.getElementById('modal-content');
            modal.innerHTML = `
                <h2 class="text-3xl font-bold neon-text mb-2 uppercase">${data.title}</h2>
                <p class="text-xs font-mono text-cyan-500/60 mb-8 italic uppercase tracking-widest">${data.subtitle}</p>
                <div class="text-gray-300 leading-relaxed text-lg">
                    <p>${data.desc}</p>
                </div>
                <div class="mt-8 pt-6 border-t border-white/10 flex justify-end">
                    <button onclick="closeDetail()" class="text-xs uppercase tracking-widest text-cyan-400 hover:text-white">Close Module</button>
                </div>
            `;
            document.getElementById('details-overlay').style.display = 'flex';
        }

        function closeDetail() {
            document.getElementById('details-overlay').style.display = 'none';
        }

        async function loadLiveData() {
            try {
                const response = await fetch('data/water_data.json');
                const data = await response.json();
                
                document.getElementById('last-update').innerText = `Analytic Engine: Active | Last Compute: ${data.timestamp}`;
                
                // Update Gandekan Gate Status
                const status = data.sensor_status.gandekan_gate;
                document.getElementById('gate-status').innerText = status;
                document.getElementById('gate-progress').style.width = status === 'ALERT' ? '85%' : '30%';
                if(status === 'ALERT') document.getElementById('gate-status').className = 'text-red-500 animate-pulse font-bold';

                // Chart
                const ctx = document.getElementById('liveChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.simulation.time,
                        datasets: [{
                            data: data.simulation.discharge,
                            borderColor: '#00f2ff',
                            backgroundColor: 'rgba(0, 242, 255, 0.05)',
                            fill: true,
                            tension: 0.4,
                            borderWidth: 1.5,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            x: { grid: { display: false }, ticks: { display: false } },
                            y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#444', size: 8 } }
                        }
                    }
                });
            } catch (e) {
                document.getElementById('last-update').innerText = `Analytic Engine: OFFLINE | Connection Lost`;
            }
        }

        window.onload = loadLiveData;
    </script>
</body>
</html>
